{% extends "base.html" %}
{% block content %}

<h1>Reportes y Estadísticas</h1>
<p>Módulo de consulta general de información de Recursos Humanos y Finanzas.</p>

<!-- ========================== -->
<!-- RESUMEN DE NÓMINA -->
<!-- ========================== -->
<h2>Resumen de Nómina</h2>
<table>
    <thead>
        <tr>
            <th>ID Nómina</th>
            <th>Empleado</th>
            <th>Salario base</th>
            <th>Deducciones</th>
            <th>Percepciones</th>
            <th>Total a pagar</th>
            <th>Periodo inicio</th>
            <th>Periodo fin</th>
        </tr>
    </thead>
    <tbody>
        {% for r in rep_nomina %}
        <tr>
            <td>{{ r.id_nomina }}</td>
            <td>{{ r.nombre_completo }}</td>
            <td>{{ r.salario_base | currency }}</td>
            <td>{{ r.deducciones | currency }}</td>
            <td>{{ r.percepciones | currency }}</td>
            <td>{{ r.total_pagar | currency }}</td>
            <td>{{ r.fecha_inicio }}</td>
            <td>{{ r.fecha_fin }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- ========================== -->
<!-- AUSENCIAS -->
<!-- ========================== -->
<h2>Ausencias del Personal</h2>
<table>
    <thead>
        <tr>
            <th>Empleado</th>
            <th>Tipo</th>
            <th>Fecha inicio</th>
            <th>Fecha fin</th>
            <th>Motivo</th>
        </tr>
    </thead>
    <tbody>
        {% for a in rep_ausencias %}
        <tr>
            <td>{{ a.nombre_completo }}</td>
            <td>{{ a.tipo }}</td>
            <td>{{ a.fecha_inicio }}</td>
            <td>{{ a.fecha_fin }}</td>
            <td>{{ a.motivo }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- ========================== -->
<!-- EVALUACIONES -->
<!-- ========================== -->
<h2>Evaluaciones de Desempeño</h2>
<table>
    <thead>
        <tr>
            <th>Empleado</th>
            <th>Fecha evaluación</th>
            <th>Tipo</th>
            <th>Resultado</th>
            <th>Observaciones</th>
        </tr>
    </thead>
    <tbody>
        {% for e in rep_evaluaciones %}
        <tr>
            <td>{{ e.nombre_completo }}</td>
            <td>{{ e.fecha_evaluacion }}</td>
            <td>{{ e.tipo }}</td>
            <td>{{ e.resultado }}</td>
            <td>{{ e.observaciones }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- ========================== -->
<!-- CAPACITACIONES -->
<!-- ========================== -->
<h2>Capacitaciones por Empleado</h2>
<table>
    <thead>
        <tr>
            <th>Empleado</th>
            <th>Capacitación</th>
            <th>Proveedor</th>
            <th>Fecha inicio</th>
            <th>Fecha fin</th>
            <th>Resultado</th>
            <th>Comentarios</th>
        </tr>
    </thead>
    <tbody>
        {% for c in rep_capacitaciones %}
        <tr>
            <td>{{ c.nombre_completo }}</td>
            <td>{{ c.capacitacion }}</td>
            <td>{{ c.proveedor }}</td>
            <td>{{ c.fecha_inicio }}</td>
            <td>{{ c.fecha_fin }}</td>
            <td>{{ c.resultado }}</td>
            <td>{{ c.comentarios }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- ========================== -->
<!-- PROYECTOS -->
<!-- ========================== -->
<h2>Participación en Proyectos</h2>
<table>
    <thead>
        <tr>
            <th>Empleado</th>
            <th>Proyecto</th>
            <th>Horas asignadas</th>
            <th>Fecha asignación</th>
            <th>Fecha entrega</th>
        </tr>
    </thead>
    <tbody>
        {% for p in rep_proyectos %}
        <tr>
            <td>{{ p.nombre_completo }}</td>
            <td>{{ p.proyecto }}</td>
            <td>{{ p.horas_asignadas }}</td>
            <td>{{ p.fecha_asignacion }}</td>
            <td>{{ p.fecha_entrega }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- ========================== -->
<!-- PRESUPUESTOS -->
<!-- ========================== -->
<h2>Presupuestos por Departamento</h2>
<table>
    <thead>
        <tr>
            <th>Departamento</th>
            <th>Periodo</th>
            <th>Monto asignado</th>
            <th>Monto utilizado</th>
            <th>Restante</th>
        </tr>
    </thead>
    <tbody>
        {% for p in rep_presupuestos %}
        <tr>
            <td>{{ p.departamento }}</td>
            <td>{{ p.periodo }}</td>
            <td>{{ p.monto_asignado | currency }}</td>
            <td>{{ p.monto_utilizado | currency }}</td>
            <td>{{ p.restante | currency }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
