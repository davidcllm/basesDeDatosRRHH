{% extends "base.html" %}

{% block content %}

<div class="container my-5">
    <h2 class="text-center mb-4">Reportes y Estadísticas</h2>
    <p class="text-center text-muted">Módulo de consulta general de información de Recursos Humanos y Finanzas.</p>

    <!-- RESUMEN DE NÓMINA -->
    <div class="card shadow-sm mb-5">
        <div class="card-header bg-primary text-white">Resumen de Nómina</div>
        <div class="card-body">
            <table class="table table-hover table-bordered">
                <thead class="table-light">
                    <tr>
                        <th>ID Nómina</th>
                        <th>Empleado</th>
                        <th>Salario base</th>
                        <th>Deducciones</th>
                        <th>Percepciones</th>
                        <th>Total a pagar</th>
                    </tr>
                </thead>
                <tbody>
                    {% for r in rep_nomina %}
                    <tr>
                        <td>{{ r.id_nomina }}</td>
                        <td>{{ r.nombre_completo }}</td>
                        <td>{{ r.salario_base }}</td>
                        <td>{{ r.deducciones }}</td>
                        <td>{{ r.percepciones }}</td>
                        <td>{{ r.total_pagar }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- AUSENCIAS -->
    <div class="card shadow-sm mb-5">
        <div class="card-header bg-secondary text-white">Ausencias del Personal</div>
        <div class="card-body">
            <table class="table table-hover table-bordered">
                <thead class="table-light">
                    <tr>
                        <th>Empleado</th>
                        <th>Tipo</th>
                        <th>Fecha inicio</th>
                        <th>Fecha fin</th>
                        <th>Motivo</th>
                    </tr>
                </thead>
                <tbody>
                    {% for r in rep_ausencias %}
                    <tr>
                        <td>{{ r.nombre_completo }}</td>
                        <td>{{ r.tipo }}</td>
                        <td>{{ r.fecha_inicio }}</td>
                        <td>{{ r.fecha_fin }}</td>
                        <td>{{ r.motivo }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- EVALUACIONES -->
    <div class="card shadow-sm mb-5">
        <div class="card-header bg-info text-white">Evaluaciones de Desempeño</div>
        <div class="card-body">
            <table class="table table-hover table-bordered">
                <thead class="table-light">
                    <tr>
                        <th>Empleado</th>
                        <th>Fecha evaluación</th>
                        <th>Tipo</th>
                        <th>Resultado</th>
                        <th>Observaciones</th>
                    </tr>
                </thead>
                <tbody>
                    {% for r in rep_evaluaciones %}
                    <tr>
                        <td>{{ r.nombre_completo }}</td>
                        <td>{{ r.fecha_evaluacion }}</td>
                        <td>{{ r.tipo }}</td>
                        <td>{{ r.resultado }}</td>
                        <td>{{ r.observaciones }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- CAPACITACIONES -->
    <div class="card shadow-sm mb-5">
        <div class="card-header bg-success text-white">Capacitaciones por Empleado</div>
        <div class="card-body">
            <table class="table table-hover table-bordered">
                <thead class="table-light">
                    <tr>
                        <th>Empleado</th>
                        <th>Capacitación</th>
                        <th>Proveedor</th>
                        <th>Fecha inicio</th>
                        <th>Fecha fin</th>
                        <th>Resultado</th>
                        <th>Comentarios</th>
                    </tr>
                </thead>
                <tbody>
                    {% for r in rep_capacitaciones %}
                    <tr>
                        <td>{{ r.nombre_completo }}</td>
                        <td>{{ r.capacitacion }}</td>
                        <td>{{ r.proveedor }}</td>
                        <td>{{ r.fecha_inicio }}</td>
                        <td>{{ r.fecha_fin }}</td>
                        <td>{{ r.resultado }}</td>
                        <td>{{ r.comentarios }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- PROYECTOS -->
    <div class="card shadow-sm mb-5">
        <div class="card-header bg-warning text-dark">Participación en Proyectos</div>
        <div class="card-body">
            <table class="table table-hover table-bordered">
                <thead class="table-light">
                    <tr>
                        <th>Empleado</th>
                        <th>Proyecto</th>
                        <th>Horas asignadas</th>
                        <th>Fecha asignación</th>
                        <th>Fecha entrega</th>
                    </tr>
                </thead>
                <tbody>
                    {% for r in rep_proyectos %}
                    <tr>
                        <td>{{ r.nombre_completo }}</td>
                        <td>{{ r.proyecto }}</td>
                        <td>{{ r.horas_asignadas }}</td>
                        <td>{{ r.fecha_asignacion }}</td>
                        <td>{{ r.fecha_entrega }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- PRESUPUESTOS POR DEPARTAMENTO -->
    <div class="card shadow-sm">
        <div class="card-header bg-dark text-white">Presupuestos por Departamento</div>
        <div class="card-body">
            <table class="table table-hover table-bordered">
                <thead class="table-light">
                    <tr>
                        <th>Departamento</th>
                        <th>Periodo inicio</th>
                        <th>Periodo fin</th>
                        <th>Monto asignado</th>
                        <th>Monto utilizado</th>
                        <th>Restante</th>
                    </tr>
                </thead>
                <tbody>
                    {% for r in rep_presupuestos %}
                    <tr>
                        <td>{{ r.departamento }}</td>
                        <td>{{ r.fecha_inicio }}</td>
                        <td>{{ r.fecha_fin }}</td>
                        <td>{{ r.monto_asignado }}</td>
                        <td>{{ r.monto_utilizado }}</td>
                        <td>{{ r.restante }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

</div>

{% endblock %}
